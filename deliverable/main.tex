\documentclass[11pt,a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{pifont}
% amssymb already defines \checkmark, so I only define my version if it doesn't exist
\providecommand{\checkmark}{\ding{51}}

\geometry{margin=1in}
\setlist{leftmargin=*}

\title{MedChain Avitabile: Deliverable}
\author{Enrico Pezzano}
\date{October 2025}

\begin{document}

\maketitle

\section*{Abstract}

This deliverable documents the implementation of MedChain Avitabile, a redactable blockchain system with smart contract governance and zero-knowledge proofs for medical data GDPR compliance. Building on Ateniese et al.'s chameleon hash-based redaction foundation, this project integrates Avitabile et al.'s smart contract governance model with Groth16 SNARK proof infrastructure, consistency verification, and on-chain proof validation pathways.

\textbf{Implementation Status:} The codebase contains complete infrastructure for Phase 2 on-chain verification with 16 public signals (including nullifiers and consistency hashes). All Python modules (\texttt{medical/backends.py}, \texttt{medical/circuit\_mapper.py}, \texttt{medical/my\_snark\_manager.py}), circuit definitions (\texttt{circuits/redaction.circom}), and smart contracts (\texttt{NullifierRegistry.sol}, \texttt{MedicalDataManager.sol}) are \textbf{code-complete}. However, \textbf{the system does not function end-to-end} because:

\begin{itemize}
    \item Circuit compilation artifacts (\texttt{circuits/build/public.json}) contain 1 public signal from an earlier configuration, not the 16 signals defined in source
    \item Nullifiers are currently synthesized off-chain by hashing timestamps, not extracted from circuit outputs (impossible with 1-signal proofs)
    \item On-chain Groth16 verification returns false due to signal count mismatch between circuit artifacts and contract expectations
    \item Integration tests requiring Hardhat/IPFS are skipped; only unit tests with mocked components pass
\end{itemize}

\textbf{To Activate:} Install circom v2.x, recompile circuits with \texttt{make circuits-compile circuits-setup circuits-export-verifier}, update Solidity verifier to accept \texttt{uint[16]} public signals, and re-test. Appendix A.1 provides step-by-step instructions. After recompilation, the infrastructure will support: (1) circuit-derived nullifiers for replay prevention; (2) on-chain extraction of consistency hashes from public signals; (3) successful Groth16 verification with $\sim$250k gas; (4) complete audit trails via blockchain events.

\textbf{Current Capabilities:} Off-chain proof generation (5--10s), circuit input mapping for 16 signals, consistency proof computation, nullifier tracking infrastructure, smart contract deployment automation, 40+ unit tests (all passing), comprehensive documentation.

\vspace{1em}
\textbf{Keywords:} Blockchain, Redactable Ledger, Zero-Knowledge Proofs, Smart Contracts, Medical Data Privacy, GDPR Compliance, Groth16, Circom

\tableofcontents
\newpage

\input{sections/introduction.tex}
\input{sections/documentation_overview.tex}
\input{sections/avitabile_implementation.tex}
\input{sections/implementation_details.tex}
\input{sections/results_and_evaluation.tex}
\input{sections/future_work.tex}
\input{sections/appendix.tex}

\nocite{botta2022towards,ateniese2017redactable,avitabile2024data}

\bibliographystyle{unsrt}
\bibliography{references}

\end{document}
